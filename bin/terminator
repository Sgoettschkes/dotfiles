#!/bin/bash

# File managed by Sgoettschkes/dotfiles
# Do not change

set -o nounset
set -o errexit

# Helpers for printing stuff
success () { printf "\e[32m$1\e[39m\n"; }
warning () { printf "\e[33m$1\e[39m\n"; }
error () { printf "\e[31m$1\e[39m\n"; }

session_agileaddicts () {
    tmux new-session -s agileaddicts -n sh -d
    tmux send-keys -t agileaddicts:1.1 'cd ~/workspace/agileaddicts; clear' C-m

    tmux new-window -n pogo.travel -t agileaddicts
    tmux split-window -t agileaddicts:2.1 -h
    tmux split-window -t agileaddicts:2.1 -v
    tmux split-window -t agileaddicts:2.3 -v
    tmux send-keys -t agileaddicts:2.1 'cd ~/workspace/agileaddicts/pogo.travel; clear' C-m
    tmux send-keys -t agileaddicts:2.2 'cd ~/workspace/agileaddicts/pogo.travel; clear' C-m
    tmux send-keys -t agileaddicts:2.3 'cd ~/workspace/agileaddicts/pogo.travel; clear' C-m
    tmux send-keys -t agileaddicts:2.4 'cd ~/workspace/agileaddicts/pogo.travel; clear' C-m
    sleep 1
    tmux send-keys -t agileaddicts:2.1 'vagrant up && vagrant ssh'

    tmux select-window -t agileaddicts:1
}

session_blossom () {
    tmux new-session -s blossom -n sh -d
    tmux send-keys -t blossom:1.1 'cd ~/workspace/blossom; clear' C-m

    tmux new-window -n blossom -t blossom
    tmux split-window -t blossom:2.1 -h
    tmux split-window -t blossom:2.1 -v
    tmux send-keys -t blossom:2.1 'cd ~/workspace/blossom/blossom; clear' C-m
    tmux send-keys -t blossom:2.2 'cd ~/workspace/blossom/blossom; clear' C-m
    tmux send-keys -t blossom:2.3 'cd ~/workspace/blossom/blossom; clear' C-m
    sleep 1
    tmux send-keys -t blossom:2.1 'vagrant up && vagrant ssh'

    tmux select-window -t blossom:1
}

session_diagnosia () {
    tmux new-session -s diagnosia -n sh -d
    tmux send-keys -t diagnosia:1.1 'cd ~/workspace/diagnosia; clear' C-m

    tmux new-window -n phoenix -t diagnosia
    tmux split-window -t diagnosia:2.1 -h
    tmux split-window -t diagnosia:2.1 -v
    tmux send-keys -t diagnosia:2.1 'cd ~/workspace/diagnosia/phoenix; clear' C-m
    tmux send-keys -t diagnosia:2.2 'cd ~/workspace/diagnosia/phoenix; clear' C-m
    tmux send-keys -t diagnosia:2.3 'cd ~/workspace/diagnosia/phoenix; clear' C-m

    tmux new-window -n app -t diagnosia
    tmux split-window -t diagnosia:3.1 -h
    tmux split-window -t diagnosia:3.1 -v
    tmux send-keys -t diagnosia:3.1 'cd ~/workspace/diagnosia/app; clear' C-m
    tmux send-keys -t diagnosia:3.2 'cd ~/workspace/diagnosia/app; clear' C-m
    tmux send-keys -t diagnosia:3.3 'cd ~/workspace/diagnosia/app; clear' C-m

    tmux new-window -n pages -t diagnosia
    tmux split-window -t diagnosia:4.1 -h
    tmux split-window -t diagnosia:4.1 -v
    tmux send-keys -t diagnosia:4.1 'cd ~/workspace/diagnosia/pages; clear' C-m
    tmux send-keys -t diagnosia:4.2 'cd ~/workspace/diagnosia/pages; clear' C-m
    tmux send-keys -t diagnosia:4.3 'cd ~/workspace/diagnosia/pages; clear' C-m

    tmux select-window -t diagnosia:1
}

session_nml () {
    tmux new-session -s nml -n sh -d
    tmux send-keys -t nml:1.1 'cd ~/workspace/nextmarketlabs; clear' C-m

    tmux new-window -n FitAdvisor -t nml
    tmux split-window -t nml:2.1 -h
    tmux split-window -t nml:2.1 -v
    tmux send-keys -t nml:2.1 'cd ~/workspace/nextmarketlabs/fitadvisor; clear' C-m
    tmux send-keys -t nml:2.2 'cd ~/workspace/nextmarketlabs/fitadvisor; clear' C-m
    tmux send-keys -t nml:2.3 'cd ~/workspace/nextmarketlabs/fitadvisor; clear' C-m
    sleep 1
    tmux send-keys -t nml:2.1 'vagrant up && vagrant ssh'

    tmux new-window -n ssh -t nml
    tmux send-keys -t nml:3.1 'ssh nml'

    tmux select-window -t nml:1
}

session_nwn () {
    tmux new-session -s nwn -n sh -d
    tmux send-keys -t nwn:1.1 'cd ~/workspace/northwestnumerics; clear' C-m

    tmux new-window -n Cerberos -t nwn
    tmux split-window -t nwn:2.1 -h
    tmux send-keys -t nwn:2.1 'cd ~/workspace/northwestnumerics/nwnm_lab_project/Olympus; clear' C-m
    tmux send-keys -t nwn:2.2 'cd ~/workspace/northwestnumerics/nwnm_lab_project/Cerberos; clear' C-m
    sleep 1
    tmux send-keys -t nwn:2.1 'vagrant up && vagrant ssh'

    tmux select-window -t nwn:1
}

session_projects() {
    tmux new-session -s projects -n sh -d
    tmux send-keys -t projects:1.1 'cd ~; clear' C-m

    tmux new-window -n dotfiles -t projects
    tmux split-window -t projects:2.1 -h
    tmux send-keys -t projects:2.1 'cd ~/workspace/Sgoettschkes/dotfiles; clear' C-m
    tmux send-keys -t projects:2.2 'cd ~/workspace/Sgoettschkes/dotfiles; clear' C-m

    tmux select-window -t projects:1
}

session_seg () {
    tmux new-session -s seg -n sh -d
    tmux send-keys -t seg:1.1 'cd ~; clear' C-m

    tmux new-window -n vimwiki -t seg
    tmux split-window -t seg:2.1 -h
    tmux send-keys -t seg:2.1 'cd ~/workspace/Sgoettschkes/vimwiki; clear' C-m
    tmux send-keys -t seg:2.2 'cd ~/workspace/Sgoettschkes/vimwiki; clear' C-m
    sleep 1
    tmux send-keys -t seg:2.1 'vim index.wiki' C-m

    tmux select-window -t seg:1
}

session_wgw () {
    tmux new-session -s wgw -n sh -d
    tmux send-keys -t wgw:1.1 'cd ~/workspace/wogibtswas; clear' C-m

    tmux new-window -n structconverter -t wgw
    tmux split-window -t wgw:2.1 -h
    tmux send-keys -t wgw:2.1 'cd ~/workspace/wogibtswas/structconverter/vm; clear' C-m
    tmux send-keys -t wgw:2.2 'cd ~/workspace/wogibtswas/structconverter; clear' C-m
    sleep 1
    tmux send-keys -t wgw:2.1 'vagrant up && vagrant ssh'

    tmux select-window -t wgw:1
}

main () {
    local readonly Sessionname=${1:-seg}

    if [[ "$TERM" == "screen-256color" ]]; then
        error "terminator cannot run inside tmux"
        exit;
    fi

    if [[ ! `tmux has-session -t $Sessionname &> /dev/null` ]]; then
        session_$Sessionname
    fi

    tmux -2 attach -t $Sessionname
}

main "$@"
